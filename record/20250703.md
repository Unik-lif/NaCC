## 实验记录
落实一下昨天设计好的内存分配方案。
```
git submodule update --init --recursive
```
让boot hart去对内存区域做好对应的初始化，包括PMP的设置，metadata区域的初始化和设置，以及bitmap范围的设置

把xv6的物理内存分配方式写了一下，移植了一下，不是特别麻烦

目前已经通过了多核的测试，看起来没啥问题

花了一些时间去搞清楚多核的事情，其实主要就抓住两个原则就行，剩下就很简单：
- do_once需要特地写一下，这部分opensbi中有实现的逻辑，可以参考
- spin_lock在opensbi中也有实现，如果使用同一块资源，需要同步，需要多使用spin_lock来做

下一步，可能可以同步着做
- 阅读qemu的源码，添加bitmap相关联的寄存器，将检查的逻辑放到硬件中去。然后还可以加上reg_cpu_state寄存器
- 实现opensbi的搬运，我们先前实现了基于satp的页表打印，现在要考虑分配内存区域，把页表页写到PMP区域中，并想办法通过某种方式组织起来，当然这件事可能不是特别复杂，但我很好奇在搬运之后，是否还能正常地去跑docker run hello-world