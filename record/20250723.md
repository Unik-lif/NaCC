## 实验记录
发现昨天的agent_mmap代码写错了，现在已经更正，没有这个问题了，但是似乎还是没有进入到agent中执行DBCN ecall，很奇怪，再尝试追溯试试看

太诡异了，不知道为什么卡在agent的入口了
```
mstatus = 0xa00000822


[SBI] want to jump to the agent region at 3f2c000000                                                                                                                                                             [   91.233558] Insufficient stack space to handle exception!                                                                                                                                                     [   91.234187] Task stack:     [0xffffffc601418000..0xffffffc60141c000]                                                                                                                                          [   91.234948] Overflow stack: [0xffffffd6fefd6070..0xffffffd6fefd7070]                                                                                                                                          [   91.236222] CPU: 3 UID: 0 PID: 954 Comm: runc:[2:INIT] Not tainted 6.12.0-00004-g586e0b81b173-dirty #1                                                                                                        [   91.237447] Hardware name: riscv-virtio,qemu (DT)                                                                                                                                                             [   91.238307] epc : 0x3f2c000000                                                                                                                                                                                [   91.239514]  ra : 0x80013280
[   91.239890] epc : 0000003f2c000000 ra : 0000000080013280 sp : 0000000080047da0
[   91.240593]  gp : ffffffff81718d30 tp : 0000000000000000 t0 : 0000000000000000
[   91.241332]  t1 : 0000000000000002 t2 : 0000000000000000 s0 : 0000000080047df0
[   91.242023]  s1 : 0000000180000400 a0 : 0000000000000035 a1 : 000000000000000a
[   91.242690]  a2 : 0000000000000001 a3 : ffffffffffffe77f a4 : 0000000000000800
[   91.243514]  a5 : 0000000a00000822 a6 : 0000000000000005 a7 : 0000000080045e90
[   91.244424]  s2 : 0000000180000410 s3 : 0000000180000400 s4 : 0000000180000410
[   91.245304]  s5 : 0000003f2c000000 s6 : 0000000000000004 s7 : 0000000000001000
[   91.246052]  s8 : 0000003dac000000 s9 : 0000003f6402b368 s10: 0000003f6402b6f0
[   91.246877]  s11: 0000003f640001c0 t3 : 0000000080047c65 t4 : 0000000000000003
[   91.247605]  t5 : 0000000000000009 t6 : 0000000000000061
[   91.248140] status: 0000000200000120 badaddr: 0000000000000000 cause: 8000000000000001
```

3f28000000

180000000: 97 26 00 00 93 86 06 00 13 06 10 00 af a6 c6 00

感觉有点奇怪，明明我这边读页表得到的结果是这个
```
[SBI] pa:ra 180000000: 3f28000000
level: 2, vaddr: 3f28001000
level: 1, vaddr: 3f28001000
[SBI] pa:ra 180001000: 3f28001000
level: 2, vaddr: 3f28002000
level: 1, vaddr: 3f28002000
[SBI] pa:ra 180002000: 3f28002000
```
但是真去看qemu中的映射关系，却发现映射关系很奇怪
```
(qemu) info mem
vaddr            paddr            size             attr
---------------- ---------------- ---------------- -------
0000002ac3625000 0000000110475000 0000000000001000 r-xu-a-
0000002ac3626000 0000000110417000 0000000000001000 r-xu-a-
0000002ac3627000 000000010fb98000 0000000000001000 r-xu-a-
0000002ac3628000 000000010fb9f000 0000000000001000 r-xu-a-
0000002ac3629000 0000000106ae5000 0000000000001000 r-xu-a-
0000002ac362a000 0000000106aeb000 0000000000002000 r-xu-a-
0000002ac362c000 000000010fb9a000 0000000000001000 r-xu-a-
0000002ac362d000 0000000106df8000 0000000000001000 r-xu-a-
0000002ac362e000 000000010de9f000 0000000000001000 r-xu-a-
0000002ac362f000 0000000106aee000 0000000000001000 r-xu-a-
0000002ac3630000 000000010fb79000 0000000000001000 r-xu-a-
0000002ac3631000 0000000106aed000 0000000000001000 r-xu-a-
0000002ac3632000 000000010de9c000 0000000000001000 r-xu-a-
0000002ac3633000 0000000109cc5000 0000000000001000 r-xu-a-
0000002ac3634000 000000010f5d1000 0000000000001000 r-xu-a-
```
目前似乎进入到我们的虚拟地址位置上就没有真正成功映射到

反而是直接尝试读物理地址，就能看到我们想要的数值
```
(qemu) xp /4x 0x180000000
0000000180000000: 0x00002697 0x00068693 0x00100613 0x00c6a6af
```
会不会是我们的页表还是没有写对？真是绝了！