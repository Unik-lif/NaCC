## 实验记录
今天尝试在agent这边把trap handler这件事情做好

我需要一个和Linux中断处理时用的一样的数据结构

然而，agent有可能还需要像Linux一样，对于S-mode来源的异常做好处理，这一点让我特别不确定

Linux中有一个奇妙的设计，它会用tp寄存器来判别中断的来源方，且其处理也是相对偏后的，并不会和其他的上下文信息同时进行存储

我不确定的主要有两点
- 按照我们方式运行的机密容器进程，在linux状态下是否还会出现S-mode的异常
- 这个S-mode的上下文信息是否还需要想办法进行处理，是否需要和U-mode之间拆分开来

看起来我们还是需要仔细去看一下linux的中断处理，我们会在20250803.md的日志中进行补充，本来我觉得S-mode中断处理可能是无足轻重的事情，但是可能并不是真的

好像想明白了，对于S-mode的中断处理，我们应该直接利用新的指令跳转到Linux的入口就可以了吧？

好像没啥问题！！！

那么我们唯一需要做的可能还是检查一下mstatus中的SPP值，这样或许就很好了！