## 实验记录
大概思考清楚了，对于我们的页表迁移的销毁工作

现在我们的目标可能就是以下
- 暂时先别搞上Agent区域
- 先尝试解决比较棘手的销毁问题
- 如果要解决这个问题，我们同样也还是会涉及page fault的handler，因此和当前的进展并不割裂
- 只不过先前搞的更加专业和安全

基本思路
- 首先搬运好页表页
- 然后回到linux，SBI告知哪些页的metadata需要注册到内核中，让OS知道这个数据被伪造一份
- 之后做mmap_lock就能找到对应的页表页数据结构
- 当linux出现页异常，且异常出现的位置正好是在页表页，也就是PMP区域的时候，qemu这边发出特殊类型异常
- 这个异常被底下的SBI捕获之后，由SBI来对其触发的异常来进行处理，同时更新的VMA和相关的页表页信息将会在内核的Metadata中捕获到
- 最终时刻当页表需要被销毁时，OS将会根据VMA来进行销毁，第一步是unmap_vmas，但是这一步并不会触发什么问题
- 第二步，free_pagetables函数，因为操作了页表页，所以之后会触发页面异常，被SBI所捕获到，由SBI处理销毁即可
- 最后一步，当进程已经被完整地销毁后，由SBI告知OS，把先前被替换的页表页释放掉，OS执行对应操作即可

这样就能干净地处理完整个页表页搬运的问题