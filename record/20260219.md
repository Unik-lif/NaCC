## 实验记录
针对pfn进行free的处理加上一些分支处理判断

```
[  106.263325] [page_nacc_mappings]: already allocated and registered.
[  106.263621] [pmd_page_nacc]: pfn: 1bfff7 actual_pfn: 1bfff7
[  106.263951] [page_nacc_mappings]: already allocated and registered.
[  106.264198] [pmd_clear_nacc]: new_pfn: 1bfffe, old_pfn: 10512d
[  106.264462] [pmd_clear_nacc]: old_pmdp: ffffffd68512ddb0
[  106.264759] [Linux]: add pfn: 1bfff7 to reclaim list, count: 1
[  106.265121] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.265481] free_pte_range: pmd: ffffffd73fffedb0 pmd val: 4000006fffdc01 pmd val pfn: 1bfff7
[  106.265858] [page_nacc_mappings]: already allocated and registered.
[  106.266093] [pmd_page_nacc]: pfn: 1bfffd actual_pfn: 10273a
[  106.266296] [page_nacc_mappings]: already allocated and registered.
[  106.266535] [pmd_clear_nacc]: new_pfn: 1bfffe, old_pfn: 10512d
[  106.266750] [pmd_clear_nacc]: old_pmdp: ffffffd68512ddb8
[  106.266938] [Linux]: add pfn: 1bfffd to reclaim list, count: 2
[  106.267153] free_pte_range: pmd: ffffffd73fffedb8 pmd val: 6ffff401 pmd val pfn: 1bfffd
[  106.267477] [__pmd_free_tlb]: pmd_page_nacc will be called.
[  106.267804] [Linux]: add pfn: 1bfffe to reclaim list, count: 3
[  106.268123] [page_nacc_mappings]: already allocated and registered.
[Qemu] nacc linux state pa: 1bffffde8 access_type: 0 pmp_has_privs: 1
[  106.268526] [page_nacc_mappings]: already allocated and registered.
[  106.268772] [pmd_page_nacc]: pfn: 1bfff6 actual_pfn: 1bfff6
[  106.268996] [page_nacc_mappings]: already allocated and registered.
[  106.269106] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.269651] [pmd_clear_nacc]: new_pfn: 1bffff, old_pfn: 1bffff
[Qemu] nacc linux state pa: 1bffffde8 access_type: 1 pmp_has_privs: 0
[Opensbi]: PTP ST emulation: virt=0xffffffd73ffffde8 phys=0x1bffffde8 val=0x0
 tcntx->regs.mepc=0xffffffff8018eec2
[Qemu] nacc linux state pa: 1bffffde8 access_type: 0 pmp_has_privs: 1
[  106.270331] free_pte_range: pmd: ffffffd73ffffde8 pmd val: 0 pmd val pfn: 0
[  106.270586] [page_nacc_mappings]: already allocated and registered.
[  106.270824] [pmd_page_nacc]: pfn: 1bfff8 actual_pfn: 1bfff8
[  106.271047] [page_nacc_mappings]: already allocated and registered.
[  106.271287] [pmd_clear_nacc]: new_pfn: 1bffff, old_pfn: 1bffff
[Qemu] nacc linux state pa: 1bffffdf0 access_type: 1 pmp_has_privs: 0
[Opensbi]: PTP ST emulation: virt=0xffffffd73ffffdf0 phys=0x1bffffdf0 val=0x0
 tcntx->regs.mepc=0xffffffff8018eec2
[  106.271919] free_pte_range: pmd: ffffffd73ffffdf0 pmd val: 0 pmd val pfn: 0
[  106.272172] [__pmd_free_tlb]: pmd_page_nacc will be called.
[  106.272392] [Linux]: add pfn: 1bffff to reclaim list, count: 4
[  106.272598] [page_nacc_mappings]: already allocated and registered.
[Qemu] nacc linux state pa: 1bfffc000 access_type: 0 pmp_has_privs: 1
[  106.272836] [page_nacc_mappings]: already allocated and registered.
[  106.273160] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.273496] [pmd_page_nacc]: pfn: 1bfffb actual_pfn: 104074
[  106.273705] [page_nacc_mappings]: already allocated and registered.
[  106.273963] [pmd_clear_nacc]: new_pfn: 1bfffc, old_pfn: 107b0d
[  106.274184] [pmd_clear_nacc]: old_pmdp: ffffffd687b0d5f0
[  106.274408] [Linux]: add pfn: 1bfffb to reclaim list, count: 5
[  106.274645] free_pte_range: pmd: ffffffd73fffc5f0 pmd val: 6fffec01 pmd val pfn: 1bfffb
[  106.274936] [__pmd_free_tlb]: pmd_page_nacc will be called.
[  106.275141] [Linux]: add pfn: 1bfffc to reclaim list, count: 6
[  106.275358] [page_nacc_mappings]: already allocated and registered.
[Qemu] nacc linux state pa: 1bfffac20 access_type: 0 pmp_has_privs: 1
[  106.275628] [page_nacc_mappings]: already allocated and registered.
[  106.275849] [pmd_page_nacc]: pfn: 1bfff9 actual_pfn: 10273e
[  106.276059] [page_nacc_mappings]: already allocated and registered.
[  106.276294] [pmd_clear_nacc]: new_pfn: 1bfffa, old_pfn: 104073
[  106.276500] [pmd_clear_nacc]: old_pmdp: ffffffd684073c20
[  106.276698] [Linux]: add pfn: 1bfff9 to reclaim list, count: 7
[  106.276931] free_pte_range: pmd: ffffffd73fffac20 pmd val: 6fffe401 pmd val pfn: 1bfff9
[  106.277323] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.277672] [__pmd_free_tlb]: pmd_page_nacc will be called.
[  106.277870] [Linux]: add pfn: 1bfffa to reclaim list, count: 8
[  106.278071] [page_nacc_mappings]: already allocated and registered.
[  106.278411] [Linux]: calling flush_reclaim_list with pfn: 1bfff7
[  106.278683] [Linux]: calling flush_reclaim_list with pfn: 1bfffd
[  106.278920] [Linux]: calling flush_reclaim_list with pfn: 1bfffe
[  106.279157] [Linux]: calling flush_reclaim_list with pfn: 1bffff
[  106.279384] [Linux]: calling flush_reclaim_list with pfn: 1bfffb
[  106.279609] [Linux]: calling flush_reclaim_list with pfn: 1bfffc
[  106.279833] [Linux]: calling flush_reclaim_list with pfn: 1bfff9
[  106.280062] [Linux]: calling flush_reclaim_list with pfn: 1bfffa
[SBI] sm_reclaim_ptp called with pfns: 17eed7000, count: 8
[SBI] Reclaiming PTP page at paddr: 1bfff7000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfffd000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfffe000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bffff000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfffb000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfffc000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfff9000
[SBI] Clear the mappings region.
[SBI] Reclaiming PTP page at paddr: 1bfffa000
[SBI] Clear the mappings region.
[SBI] Clear the mappings region.
[  106.283331] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.283811] [Linux]: calling pgtbl_debug SBI call
page table 118866000
[Summary] Page Table Pages Used:
  Level 2 (VPN[2]) pages: 1
  Level 1 (VPN[1]) pages: 0
  Level 0 (VPN[0]) pages: 0
  Total page table pages: 1 (size = 4 KiB)
  Total leaf data pages: 0 (bitmap size = 0 bytes)
  Total user leaf pages: 0
[  106.285230] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.293591] BUG: Bad page state in process systemd-journal  pfn:1bfff7
[  106.297831] BUG: Bad page state in process systemd-journal  pfn:1bfff6
[  106.299450] BUG: Bad page state in process systemd-journal  pfn:1bfff8
[  106.301129] BUG: Bad page state in process systemd-journal  pfn:1bffff
[  106.541888] BUG: Bad rss-counter state mm:00000000b1b586ed type:MM_FILEPAGES val:307
[  106.542254] BUG: Bad rss-counter state mm:00000000b1b586ed type:MM_ANONPAGES val:31
[  106.542633] BUG: non-zero pgtables_bytes on freeing mm: -8192
[  106.549276] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
[  106.569081] [Linux]: Back to 'do_irq' in kernel. With regs->status: 200000120
QEMU: Terminated
```